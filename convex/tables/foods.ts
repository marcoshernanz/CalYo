import { defineTable } from "convex/server";
import { v } from "convex/values";

export const foodsFields = {
  identity: v.union(
    v.object({
      source: v.literal("fdc"),
      id: v.number(),
      dataType: v.union(
        v.literal("Foundation"),
        v.literal("Legacy"),
        v.literal("Survey")
      ),
    }),
    v.object({
      source: v.literal("off"),
      code: v.string(),
    })
  ),

  name: v.object({
    en: v.string(),
    es: v.optional(v.string()),
  }),
  category: v.optional(
    v.object({ en: v.string(), es: v.optional(v.string()) })
  ),

  macroNutrients: v.object({
    protein: v.number(),
    fat: v.number(),
    carbs: v.number(),
  }),

  healthScore: v.optional(v.number()),

  nutrients: v.object({
    nitrogen: v.optional(v.number()),
    protein: v.optional(v.number()),
    totalLipidFat: v.optional(v.number()),
    carbohydrateByDifference: v.optional(v.number()),
    ash: v.optional(v.number()),
    energy: v.optional(v.number()),
    starch: v.optional(v.number()),
    sucrose: v.optional(v.number()),
    glucose: v.optional(v.number()),
    fructose: v.optional(v.number()),
    lactose: v.optional(v.number()),
    maltose: v.optional(v.number()),
    alcoholEthyl: v.optional(v.number()),
    specificGravity: v.optional(v.number()),
    citricAcid: v.optional(v.number()),
    malicAcid: v.optional(v.number()),
    oxalicAcid: v.optional(v.number()),
    pyruvicAcid: v.optional(v.number()),
    quinicAcid: v.optional(v.number()),
    carbohydrateBySummation: v.optional(v.number()),
    water: v.optional(v.number()),
    caffeine: v.optional(v.number()),
    theobromine: v.optional(v.number()),
    sugarsTotal: v.optional(v.number()),
    resistantStarch: v.optional(v.number()),
    galactose: v.optional(v.number()),
    raffinose: v.optional(v.number()),
    stachyose: v.optional(v.number()),
    fiberTotalDietary: v.optional(v.number()),
    fiberSoluble: v.optional(v.number()),
    fiberInsoluble: v.optional(v.number()),
    totalFatNlea: v.optional(v.number()),
    calciumCa: v.optional(v.number()),
    ironFe: v.optional(v.number()),
    magnesiumMg: v.optional(v.number()),
    phosphorusP: v.optional(v.number()),
    potassiumK: v.optional(v.number()),
    sodiumNa: v.optional(v.number()),
    sulfurS: v.optional(v.number()),
    zincZn: v.optional(v.number()),
    cobaltCo: v.optional(v.number()),
    copperCu: v.optional(v.number()),
    fluorideF: v.optional(v.number()),
    iodineI: v.optional(v.number()),
    manganeseMn: v.optional(v.number()),
    molybdenumMo: v.optional(v.number()),
    seleniumSe: v.optional(v.number()),
    vitaminAIu: v.optional(v.number()),
    retinol: v.optional(v.number()),
    vitaminARae: v.optional(v.number()),
    caroteneBeta: v.optional(v.number()),
    caroteneAlpha: v.optional(v.number()),
    vitaminEAlphaTocopherol: v.optional(v.number()),
    vitaminDD2D3InternationalUnits: v.optional(v.number()),
    vitaminD2Ergocalciferol: v.optional(v.number()),
    vitaminD3Cholecalciferol: v.optional(v.number()),
    _25Hydroxycholecalciferol: v.optional(v.number()),
    vitaminDD2D3: v.optional(v.number()),
    phytoene: v.optional(v.number()),
    phytofluene: v.optional(v.number()),
    caroteneGamma: v.optional(v.number()),
    zeaxanthin: v.optional(v.number()),
    cryptoxanthinBeta: v.optional(v.number()),
    lutein: v.optional(v.number()),
    lycopene: v.optional(v.number()),
    luteinZeaxanthin: v.optional(v.number()),
    tocopherolBeta: v.optional(v.number()),
    tocopherolGamma: v.optional(v.number()),
    tocopherolDelta: v.optional(v.number()),
    tocotrienolAlpha: v.optional(v.number()),
    tocotrienolBeta: v.optional(v.number()),
    tocotrienolGamma: v.optional(v.number()),
    tocotrienolDelta: v.optional(v.number()),
    boronB: v.optional(v.number()),
    nickelNi: v.optional(v.number()),
    cisBetaCarotene: v.optional(v.number()),
    cisLycopene: v.optional(v.number()),
    cisLuteinZeaxanthin: v.optional(v.number()),
    vitaminCTotalAscorbicAcid: v.optional(v.number()),
    thiamin: v.optional(v.number()),
    riboflavin: v.optional(v.number()),
    niacin: v.optional(v.number()),
    pantothenicAcid: v.optional(v.number()),
    vitaminB6: v.optional(v.number()),
    biotin: v.optional(v.number()),
    folateTotal: v.optional(v.number()),
    vitaminB12: v.optional(v.number()),
    cholineTotal: v.optional(v.number()),
    vitaminKMenaquinone4: v.optional(v.number()),
    vitaminKDihydrophylloquinone: v.optional(v.number()),
    vitaminKPhylloquinone: v.optional(v.number()),
    folicAcid: v.optional(v.number()),
    folateFood: v.optional(v.number()),
    _5MethylTetrahydrofolate5Mthf: v.optional(v.number()),
    folateDfe: v.optional(v.number()),
    _10FormylFolicAcid10hcofa: v.optional(v.number()),
    _5FormyltetrahydrofolicAcid5Hcoh4: v.optional(v.number()),
    cholineFree: v.optional(v.number()),
    cholineFromPhosphocholine: v.optional(v.number()),
    cholineFromPhosphotidylCholine: v.optional(v.number()),
    cholineFromGlycerophosphocholine: v.optional(v.number()),
    betaine: v.optional(v.number()),
    cholineFromSphingomyelin: v.optional(v.number()),
    tryptophan: v.optional(v.number()),
    threonine: v.optional(v.number()),
    isoleucine: v.optional(v.number()),
    leucine: v.optional(v.number()),
    lysine: v.optional(v.number()),
    methionine: v.optional(v.number()),
    cystine: v.optional(v.number()),
    phenylalanine: v.optional(v.number()),
    tyrosine: v.optional(v.number()),
    valine: v.optional(v.number()),
    arginine: v.optional(v.number()),
    histidine: v.optional(v.number()),
    alanine: v.optional(v.number()),
    asparticAcid: v.optional(v.number()),
    glutamicAcid: v.optional(v.number()),
    glycine: v.optional(v.number()),
    proline: v.optional(v.number()),
    serine: v.optional(v.number()),
    hydroxyproline: v.optional(v.number()),
    cysteine: v.optional(v.number()),
    vitaminEAdded: v.optional(v.number()),
    vitaminB12Added: v.optional(v.number()),
    cholesterol: v.optional(v.number()),
    fattyAcidsTotalTrans: v.optional(v.number()),
    fattyAcidsTotalSaturated: v.optional(v.number()),
    sfa40: v.optional(v.number()),
    sfa60: v.optional(v.number()),
    sfa80: v.optional(v.number()),
    sfa100: v.optional(v.number()),
    sfa120: v.optional(v.number()),
    sfa140: v.optional(v.number()),
    sfa160: v.optional(v.number()),
    sfa180: v.optional(v.number()),
    sfa200: v.optional(v.number()),
    mufa181: v.optional(v.number()),
    pufa182: v.optional(v.number()),
    pufa183: v.optional(v.number()),
    pufa204: v.optional(v.number()),
    pufa226N3Dha: v.optional(v.number()),
    sfa220: v.optional(v.number()),
    mufa141: v.optional(v.number()),
    mufa161: v.optional(v.number()),
    pufa184: v.optional(v.number()),
    mufa201: v.optional(v.number()),
    pufa205N3Epa: v.optional(v.number()),
    mufa221: v.optional(v.number()),
    pufa225N3Dpa: v.optional(v.number()),
    tfa141T: v.optional(v.number()),
    phytosterols: v.optional(v.number()),
    ergosterol: v.optional(v.number()),
    stigmasterol: v.optional(v.number()),
    campesterol: v.optional(v.number()),
    brassicasterol: v.optional(v.number()),
    betaSitosterol: v.optional(v.number()),
    campestanol: v.optional(v.number()),
    fattyAcidsTotalMonounsaturated: v.optional(v.number()),
    fattyAcidsTotalPolyunsaturated: v.optional(v.number()),
    betaSitostanol: v.optional(v.number()),
    delta5Avenasterol: v.optional(v.number()),
    phytosterolsOther: v.optional(v.number()),
    sfa150: v.optional(v.number()),
    sfa170: v.optional(v.number()),
    sfa240: v.optional(v.number()),
    tfa161T: v.optional(v.number()),
    tfa181T: v.optional(v.number()),
    tfa221T: v.optional(v.number()),
    tfa182TNotFurtherDefined: v.optional(v.number()),
    pufa182I: v.optional(v.number()),
    tfa182TT: v.optional(v.number()),
    pufa182Clas: v.optional(v.number()),
    mufa241C: v.optional(v.number()),
    pufa202N6CC: v.optional(v.number()),
    mufa161C: v.optional(v.number()),
    mufa181C: v.optional(v.number()),
    pufa182N6CC: v.optional(v.number()),
    mufa221C: v.optional(v.number()),
    pufa183N6CCC: v.optional(v.number()),
    mufa171: v.optional(v.number()),
    pufa203: v.optional(v.number()),
    fattyAcidsTotalTransMonoenoic: v.optional(v.number()),
    fattyAcidsTotalTransDienoic: v.optional(v.number()),
    fattyAcidsTotalTransPolyenoic: v.optional(v.number()),
    sfa130: v.optional(v.number()),
    mufa151: v.optional(v.number()),
    pufa222: v.optional(v.number()),
    sfa110: v.optional(v.number()),
    daidzein: v.optional(v.number()),
    genistein: v.optional(v.number()),
    pufa183N3CCCAla: v.optional(v.number()),
    pufa203N3: v.optional(v.number()),
    pufa203N6: v.optional(v.number()),
    pufa204N6: v.optional(v.number()),
    pufa183i: v.optional(v.number()),
    pufa215: v.optional(v.number()),
    pufa224: v.optional(v.number()),
    mufa18111T181tN7: v.optional(v.number()),
    pufa203N9: v.optional(v.number()),
    totalSugars: v.optional(v.number()),
    sfa50: v.optional(v.number()),
    sfa70: v.optional(v.number()),
    sfa90: v.optional(v.number()),
    sfa210: v.optional(v.number()),
    sfa230: v.optional(v.number()),
    mufa121: v.optional(v.number()),
    mufa141C: v.optional(v.number()),
    mufa171C: v.optional(v.number()),
    mufa201C: v.optional(v.number()),
    tfa201T: v.optional(v.number()),
    mufa221N9: v.optional(v.number()),
    mufa221N11: v.optional(v.number()),
    pufa182C: v.optional(v.number()),
    tfa182T: v.optional(v.number()),
    pufa183C: v.optional(v.number()),
    tfa183T: v.optional(v.number()),
    pufa203C: v.optional(v.number()),
    pufa223: v.optional(v.number()),
    pufa204c: v.optional(v.number()),
    pufa205c: v.optional(v.number()),
    pufa225C: v.optional(v.number()),
    pufa226C: v.optional(v.number()),
    pufa202C: v.optional(v.number()),
    transBetaCarotene: v.optional(v.number()),
    transLycopene: v.optional(v.number()),
    cryptoxanthinAlpha: v.optional(v.number()),
    totalDietaryFiberAoac201125: v.optional(v.number()),
    highMolecularWeightDietaryFiberHmwdf: v.optional(v.number()),
    energyAtwaterGeneralFactors: v.optional(v.number()),
    energyAtwaterSpecificFactors: v.optional(v.number()),
    daidzin: v.optional(v.number()),
    genistin: v.optional(v.number()),
    glycitin: v.optional(v.number()),
    delta7Stigmastenol: v.optional(v.number()),
    stigmastadiene: v.optional(v.number()),
    ergothioneine: v.optional(v.number()),
    betaGlucan: v.optional(v.number()),
    vitaminD4: v.optional(v.number()),
    ergosta7Enol: v.optional(v.number()),
    ergosta722Dienol: v.optional(v.number()),
    ergosta57Dienol: v.optional(v.number()),
    verbascose: v.optional(v.number()),
    lowMolecularWeightDietaryFiberLmwdf: v.optional(v.number()),
    vitaminA: v.optional(v.number()),
    glutathione: v.optional(v.number()),
  }),

  embedding: v.optional(v.array(v.float64())),
  hasEmbedding: v.boolean(),
};

export const foods = defineTable(foodsFields)
  .index("byIdentitySourceId", ["identity.source", "identity.id"])
  .index("byHasEmbedding", ["hasEmbedding"])
  .vectorIndex("byEmbedding", {
    vectorField: "embedding",
    dimensions: 768,
    filterFields: ["identity.source"],
  });
